plugins {
    id "com.android.library"
    id "com.jakewharton.butterknife"
    id "maven"
}

// in config.gradle
configAndroidDomain project

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    //support
    api Deps.multidex
    api Deps.appcompat_v7
    api(Deps.recyclerview_v7) {
        exclude group: 'com.android.support'
    }
    api Deps.constraint_layout

    //rx
    api Deps.rxjava2
    api(Deps.rxandroid2) {
        exclude module: 'rxjava'
    }
    api(Deps.rxcache2) {
        exclude module: 'dagger'
        exclude module: 'rxjava'
        exclude module: 'api'
    }
    implementation(Deps.rxcache_gson) {
        exclude module: 'gson'
    }
    api(Deps.retrofit2) {
        exclude module: 'okhttp'
    }
    implementation(Deps.retrofit2_adapter_rxjava2) {
        exclude module: 'retrofit'
        exclude module: 'rxjava'
    }
    api(Deps.retrofit2_converter_gson) {
        exclude module: 'retrofit'
    }
    api Deps.rxerrorhandler
    api(Deps.x_rxbus) {
        exclude module: 'rxjava'
    }
    api(Deps.autodispose_archcomponents) {
        exclude module: 'support-annotations'
        exclude module: 'runtime'
        exclude module: 'rxandroid'
        exclude module: 'rxjava'
    }
    //okhttp
    api Deps.okhttp3

    //butterknife
    implementation(Deps.butterknife) {
        exclude module: 'support-annotations'
        exclude module: 'support-compat'
    }
    annotationProcessor Deps.butterknife_apt

    //glide
    compileOnly(Deps.glide) {
        exclude module: 'support-annotations'
        exclude module: 'support-fragment'
    }

    //dagger2
    implementation Deps.dagger2
    annotationProcessor Deps.dagger2_apt

    //常用的util库
    api Deps.utilcode
    //fragment框架
    api Deps.fragmentation_core
    //loading动画样式
    implementation Deps.loading_indicator_view
}

apply from: 'bintray.gradle'
//
//task androidJavadocs(type: Javadoc) {//生成文档注释
//    failOnError = false
//    source = android.sourceSets.main.java.srcDirs
//    ext.androidJar = "${android.sdkDirectory}/platforms/${android.compileSdkVersion}/android.jar"
//    classpath += files(ext.androidJar)
//}
//
//task androidJavadocsJar(type: Jar, dependsOn: androidJavadocs) {//将文档打包成jar
//    classifier = 'javadoc'
//    from androidJavadocs.destinationDir
//}
//
//task androidSourcesJar(type: Jar) {//将源码打包
//    classifier = 'sources'
//    from android.sourceSets.main.java.srcDirs
//}
//
//artifacts {//包含文档和源码的aar
//    archives androidSourcesJar
//    archives androidJavadocsJar
//}
//
//Properties properties = new Properties()
//def localFile = project.rootProject.file("local.properties")
//if (localFile != null && localFile.exists()) {
//    properties.load(localFile.newDataInputStream())
//}
//uploadArchives {
//    def userName = properties.getProperty("maven.user")
//    def password = properties.getProperty("maven.pwd")
//    def url = properties.getProperty("maven.repository")
//    configuration = configurations.archives
//    repositories {
//        mavenDeployer {
//            repository(url: url) {
//                authentication(userName: userName, password: password)
//            }
//            pom.project {
//                version Publish.publishVersion
//                artifactId 'fly'
//                groupId Publish.groupId
//                packaging 'aar'
//                description Publish.desc
//            }
//        }
//    }
//}